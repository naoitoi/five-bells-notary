machine:
  services:
    - docker
  node:
    version: 4.2.4
dependencies:
  pre:
    # TODO: Steps to install Oracle instant client
    # Fetch Oracle Express Edition Docker image
    - docker pull wnameless/oracle-xe-11g
test:
  override:
    # Run lint
    - npm run lint
    # Run tests
    - npm test
deployment:
  production:
    branch: master
    commands:
      # Push NPM package if not yet published
      - mv npmrc-env .npmrc
      - if [ -z "$(npm info $(npm ls --depth=-1 2>/dev/null | head -1 | cut -f 1 -d " ") 2>/dev/null)" ] ; then npm publish ; fi
